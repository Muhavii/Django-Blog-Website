<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Muhavi's Blog{% endblock %}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .hero-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 80px 0;
        }
        .card {
            transition: transform 0.3s ease;
            border: none;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.2);
        }
        .navbar-brand {
            font-weight: bold;
            font-size: 1.5rem;
        }
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
        }
        .btn-primary:hover {
            background: linear-gradient(135deg, #5a6fd8 0%, #6a4190 100%);
        }
        .footer {
            background-color: #343a40;
            color: white;
            padding: 40px 0;
            margin-top: 50px;
        }
        .blog-image {
            width: 100%;
            max-height: 400px;
            object-fit: cover;
            border-radius: 8px;
            cursor: pointer;
            transition: transform 0.2s ease;
        }
        .blog-image:hover {
            transform: scale(1.02);
        }
        .blog-image-detail {
            width: 100%;
            max-height: 500px;
            object-fit: cover;
            border-radius: 8px;
            cursor: pointer;
            transition: transform 0.2s ease;
        }
        .blog-image-detail:hover {
            transform: scale(1.02);
        }
        
        /* Image Modal Styles */
        .image-modal {
            display: none;
            position: fixed;
            z-index: 9999;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            cursor: pointer;
        }
        .modal-content-img {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            max-width: 95%;
            max-height: 95%;
            object-fit: contain;
            border-radius: 8px;
        }
        .close-modal {
            position: absolute;
            top: 20px;
            right: 35px;
            color: #fff;
            font-size: 40px;
            font-weight: bold;
            cursor: pointer;
            z-index: 10000;
        }
        .close-modal:hover {
            color: #ccc;
        }
        
        @media (max-width: 768px) {
            .blog-image {
                max-height: 250px;
            }
            .blog-image-detail {
                max-height: 300px;
            }
            .modal-content-img {
                max-width: 98%;
                max-height: 98%;
            }
            .close-modal {
                top: 10px;
                right: 20px;
                font-size: 30px;
            }
        }
        @media (min-width: 992px) {
            .blog-image {
                max-width: 600px;
                margin: 0 auto;
                display: block;
            }
            .blog-image-detail {
                max-width: 700px;
                margin: 0 auto;
                display: block;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="{% url 'home' %}">
                <i class="fas fa-blog"></i> Muhavi's Blog
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link {% if request.path == '/' %}active{% endif %}" href="{% url 'home' %}">
                            <i class="fas fa-home me-1"></i> Home
                        </a>
                    </li>
                    {% if user.is_authenticated %}
                    <li class="nav-item">
                        <a class="nav-link {% if '/create/' in request.path %}active{% endif %}" href="{% url 'create_post' %}">
                            <i class="fas fa-plus-circle me-1"></i> Create Post
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link {% if 'profile/' in request.path and user.username in request.path %}active{% endif %}" 
                           href="{% url 'profile_view' user.username %}">
                            <i class="fas fa-user me-1"></i> My Profile
                        </a>
                    </li>
                    {% endif %}
                </ul>
                
                <!-- Search Form -->
                <form class="d-flex me-2" action="{% url 'user_search' %}" method="get">
                    <div class="input-group">
                        <input type="search" 
                               name="query" 
                               class="form-control form-control-sm" 
                               placeholder="Search users..."
                               aria-label="Search users"
                               value="{{ request.GET.query|default:'' }}">
                        <button class="btn btn-outline-light btn-sm" type="submit">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>
                </form>
                <ul class="navbar-nav">
                    {% if user.is_authenticated %}
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown">
                            {% if user.profile.profile_picture %}
                                <img src="{{ user.profile.profile_picture.url }}" alt="Profile" class="rounded-circle me-1" style="width: 25px; height: 25px; object-fit: cover;">
                            {% else %}
                                <i class="fas fa-user"></i>
                            {% endif %}
                            {{ user.username }}
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="{% url 'profile_view' user.username %}">
                                <i class="fas fa-user"></i> My Profile
                            </a></li>
                            <li><a class="dropdown-item" href="{% url 'profile_settings' %}">
                                <i class="fas fa-cog"></i> Settings
                            </a></li>
                            <li><a class="dropdown-item" href="{% url 'create_post' %}">
                                <i class="fas fa-plus"></i> Create Post
                            </a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="{% url 'logout' %}">
                                <i class="fas fa-sign-out-alt"></i> Logout
                            </a></li>
                        </ul>
                    </li>
                    {% else %}
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'login' %}"><i class="fas fa-sign-in-alt"></i> Login</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'register' %}"><i class="fas fa-user-plus"></i> Register</a>
                    </li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </nav>

    <!-- Messages -->
    {% if messages %}
    <div class="container mt-3">
        {% for message in messages %}
        <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
        {% endfor %}
    </div>
    {% endif %}

    <!-- Main Content -->
    <main>
        {% block content %}
        {% endblock %}
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="col-12 text-center mb-3">
                    <div class="fun-fact-container">
                        <h6><i class="fas fa-lightbulb text-warning"></i> Fun Fact</h6>
                        <p id="random-fact" class="mb-0 fst-italic"></p>
                    </div>
                </div>
                <div class="col-12 text-center">
                    <p class="mb-0">&copy; 2025 Muhavi's Blog. All rights reserved.</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Image Modal -->
    <div id="imageModal" class="image-modal">
        <span class="close-modal">&times;</span>
        <img class="modal-content-img" id="modalImage">
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // Image Modal Functionality
        document.addEventListener('DOMContentLoaded', function() {
            const modal = document.getElementById('imageModal');
            const modalImg = document.getElementById('modalImage');
            const closeBtn = document.querySelector('.close-modal');
            
            // Add click event to all blog images
            document.addEventListener('click', function(e) {
                if (e.target.classList.contains('blog-image') || e.target.classList.contains('blog-image-detail')) {
                    modal.style.display = 'block';
                    modalImg.src = e.target.src;
                    modalImg.alt = e.target.alt;
                    document.body.style.overflow = 'hidden'; // Prevent scrolling
                }
            });
            
            // Close modal when clicking X
            closeBtn.addEventListener('click', function() {
                closeModal();
            });
            
            // Close modal when clicking outside image
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    closeModal();
                }
            });
            
            // Close modal with Escape key
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && modal.style.display === 'block') {
                    closeModal();
                }
            });
            
            function closeModal() {
                modal.style.display = 'none';
                document.body.style.overflow = 'auto'; // Restore scrolling
            }
        });
    </script>
    
    <script>
        // Fun facts array
        const funFacts = [
            "Honey never spoils! Archaeologists have found pots of honey in ancient Egyptian tombs that are over 3,000 years old and still perfectly edible.",
            "A group of flamingos is called a 'flamboyance'.",
            "Bananas are berries, but strawberries aren't!",
            "The shortest war in history lasted only 38-45 minutes between Britain and Zanzibar in 1896.",
            "Octopuses have three hearts and blue blood.",
            "A shrimp's heart is in its head.",
            "It's impossible to hum while holding your nose closed.",
            "The human brain uses about 20% of the body's total energy.",
            "There are more possible games of chess than atoms in the observable universe.",
            "Wombat poop is cube-shaped!",
            "A day on Venus is longer than its year.",
            "Sharks have been around longer than trees.",
            "The Great Wall of China isn't visible from space with the naked eye.",
            "Butterflies taste with their feet.",
            "A group of pandas is called an 'embarrassment'.",
            "The unicorn is Scotland's national animal.",
            "Cleopatra lived closer in time to the Moon landing than to the construction of the Great Pyramid of Giza.",
            "There are more trees on Earth than stars in the Milky Way galaxy.",
            "A single cloud can weigh more than a million pounds.",
            "The longest recorded flight of a chicken is 13 seconds.",
            "Sea otters hold hands while sleeping to prevent drifting apart.",
            "The word 'set' has the most different meanings in the English language.",
            "A group of owls is called a 'parliament'.",
            "Dolphins have names for each other.",
            "The human nose can detect about 1 trillion different scents.",
            "A bolt of lightning is five times hotter than the surface of the sun.",
            "Penguins can jump as high as 6 feet in the air.",
            "The longest place name in the world has 85 letters.",
            "A group of crows is called a 'murder'.",
            "Your stomach gets an entirely new lining every 3-4 days."
        ];

        // Function to display random fact
        function displayRandomFact() {
            const randomIndex = Math.floor(Math.random() * funFacts.length);
            const factElement = document.getElementById('random-fact');
            if (factElement) {
                factElement.textContent = funFacts[randomIndex];
            }
        }

        // Display random fact when page loads
        document.addEventListener('DOMContentLoaded', displayRandomFact);
    </script>
    
    {% block extra_js %}
    {% endblock %}
</body>
</html>
